# Drag Functionality for Node Network Animation

## Реализованная функциональность

В анимацию заднего плана (NodeNetworkAnimation) добавлена возможность перетаскивания нод мышью.

### Основные возможности:

1. **Перетаскивание мышью**:
   - Наведите курсор на ноду (символ) на заднем плане
   - Курсор изменится на `grab` для индикации возможности захвата
   - Нажмите и удерживайте левую кнопку мыши для захвата ноды
   - Перетащите ноду в новое положение
   - Отпустите кнопку мыши для освобождения ноды

2. **Поддержка сенсорных устройств**:
   - Работает на мобильных устройствах с тач-экранами
   - Коснитесь ноды и перетащите её пальцем

3. **Визуальная обратная связь**:
   - Курсор меняется на `grab` при наведении на ноду
   - Курсор меняется на `grabbing` во время перетаскивания
   - Область захвата составляет 25 пикселей вокруг центра ноды

4. **Физика**:
   - Во время перетаскивания нода останавливается (скорость = 0)
   - После отпускания нода восстанавливает свою исходную скорость
   - Если исходная скорость была утеряна, применяется случайная небольшая скорость
   - Нода ограничена границами канваса

### Технические детали:

- **Файл**: `src/features/animations/NodeNetworkAnimation.ts`
- **Методы**:
  - `setupMouseEventListeners()` - настройка обработчиков событий
  - `findNodeAtPosition(x, y)` - поиск ноды в указанной позиции
  - Обработчики: `mousedown`, `mousemove`, `mouseup`, `mouseleave`
  - Touch события: `touchstart`, `touchmove`, `touchend`

- **Изменения в интерфейсе Node**:
  ```typescript
  interface Node {
    // ... существующие поля
    isDragging?: boolean;     // флаг перетаскивания
    originalVx?: number;      // сохраненная скорость X
    originalVy?: number;      // сохраненная скорость Y
  }
  ```

- **Canvas настройки**:
  - `pointer-events: auto` включено для взаимодействия с мышью
  - События не блокируют прокрутку страницы

### Как протестировать:

1. Откройте сайт в браузере
2. Подождите загрузки анимации заднего плана
3. Наведите курсор на любой символ (ноду) на заднем плане
4. Курсор должен измениться на руку
5. Нажмите и перетащите ноду в новое место
6. Отпустите - нода продолжит движение с восстановленной скоростью

### Производительность:

- Обработчики событий добавляются только один раз при инициализации
- Поиск ноды оптимизирован с ранним выходом
- Очистка событий происходит автоматически при уничтожении компонента
- Не влияет на производительность анимации когда перетаскивание не активно

Используйте отладочные метрики `getMetrics()` для мониторинга состояния перетаскивания.

